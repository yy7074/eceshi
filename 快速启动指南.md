# 快速启动指南 🚀

## 项目概述

科研检测服务平台已完成基础框架搭建！

### ✅ 已完成的工作

1. **Python后端**（FastAPI）
   - ✅ 用户注册登录API
   - ✅ 实名认证API
   - ✅ 项目展示API
   - ✅ JWT认证机制
   - ✅ 数据库模型（用户、认证）
   - ✅ 统一响应格式

2. **uni-app前端**
   - ✅ 首页（项目展示）
   - ✅ 底部导航栏
   - ✅ API请求封装
   - ✅ Vuex状态管理
   - ✅ 支持多平台（小程序/H5/App）

3. **项目文档**
   - ✅ 详细开发计划（2600+行）
   - ✅ README文档
   - ✅ API文档

---

## 环境要求

### 后端
- Python 3.10+
- MySQL 8.0
- Redis 6.0+

### 前端
- HBuilderX（推荐）或 Node.js 14+

---

## 快速启动

### 第一步：启动后端

#### 1. 安装MySQL和Redis

**Mac用户（使用Homebrew）：**
```bash
# 安装MySQL
brew install mysql
brew services start mysql

# 安装Redis
brew install redis
brew services start redis
```

**创建数据库：**
```bash
mysql -u root -p
```
```sql
CREATE DATABASE eceshi CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
EXIT;
```

#### 2. 安装Python依赖

```bash
cd backend
pip install -r requirements.txt
```

#### 3. 配置环境变量

```bash
# 复制环境变量示例文件
cp .env.example .env

# 编辑 .env 文件，修改以下配置：
# DATABASE_URL=mysql+pymysql://root:你的密码@localhost:3306/eceshi?charset=utf8mb4
# 其他配置可以暂时使用默认值
```

#### 4. 启动后端服务

```bash
# 方式1：直接运行
python -m app.main

# 方式2：使用uvicorn（推荐）
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

**访问API文档：**
- Swagger UI: http://localhost:8000/api/docs
- ReDoc: http://localhost:8000/api/redoc

---

### 第二步：启动前端

#### 方法1：使用HBuilderX（推荐）

1. 下载并安装 [HBuilderX](https://www.dcloud.io/hbuilderx.html)
2. 打开HBuilderX
3. 文件 → 导入 → 从本地目录导入
4. 选择 `frontend` 目录
5. 运行：
   - **H5**: 运行 → 运行到浏览器 → Chrome
   - **微信小程序**: 运行 → 运行到小程序模拟器 → 微信开发者工具
   - **支付宝小程序**: 运行 → 运行到小程序模拟器 → 支付宝开发者工具

#### 方法2：使用命令行

```bash
cd frontend

# 安装依赖（如果使用命令行）
npm install

# 运行到H5（浏览器）
npm run dev:h5

# 运行到微信小程序
npm run dev:mp-weixin

# 运行到支付宝小程序
npm run dev:mp-alipay
```

**访问H5版本：**
- http://localhost:8080

---

## 测试账号

### 开发模式（默认配置）

**短信验证码**：`123456`（所有场景通用）

**测试流程：**
1. 在前端注册页面输入手机号：`13800138000`
2. 输入验证码：`123456`
3. 设置密码：`123456`
4. 注册成功后自动登录

---

## 主要功能演示

### 1. 用户注册登录
```bash
# API测试（使用curl或Postman）
curl -X POST http://localhost:8000/api/v1/auth/register \
  -H "Content-Type: application/json" \
  -d '{
    "phone": "13800138000",
    "password": "123456",
    "sms_code": "123456"
  }'
```

### 2. 获取项目列表
```bash
curl http://localhost:8000/api/v1/projects/list?page=1&page_size=10
```

### 3. 获取用户信息（需要token）
```bash
curl http://localhost:8000/api/v1/users/me \
  -H "Authorization: Bearer YOUR_TOKEN"
```

---

## 目录结构

```
eceshi/
├── backend/                 # Python后端
│   ├── app/
│   │   ├── api/            # API路由
│   │   │   └── v1/         # v1版本API
│   │   │       ├── auth.py       # 认证API
│   │   │       ├── users.py      # 用户API
│   │   │       └── projects.py   # 项目API
│   │   ├── core/           # 核心配置
│   │   │   ├── config.py         # 配置管理
│   │   │   ├── database.py       # 数据库
│   │   │   ├── security.py       # 安全（JWT）
│   │   │   └── response.py       # 响应格式
│   │   ├── models/         # 数据库模型
│   │   │   └── user.py           # 用户模型
│   │   ├── schemas/        # Pydantic模型
│   │   │   └── user.py           # 用户Schema
│   │   └── main.py         # 主入口
│   ├── requirements.txt    # Python依赖
│   └── .env.example        # 环境变量示例
│
├── frontend/               # uni-app前端
│   ├── pages/             # 页面
│   │   └── index/         # 首页
│   ├── store/             # Vuex状态管理
│   ├── utils/             # 工具函数
│   │   ├── request.js     # 请求封装
│   │   └── api.js         # API接口定义
│   ├── App.vue            # 应用配置
│   ├── main.js            # 入口文件
│   ├── manifest.json      # 应用配置
│   └── pages.json         # 页面配置
│
└── 开发计划.md             # 详细开发计划（2600+行）
```

---

## 下一步开发计划

### 第一迭代（当前）✅
- [x] 用户注册登录
- [x] 项目展示

### 第二迭代（接下来）
- [ ] 下单流程
- [ ] 支付功能
- [ ] 订单管理

### 第三迭代
- [ ] 实验室管理端
- [ ] 数据上传
- [ ] 报告生成

详见：[开发计划.md](./开发计划.md)

---

## 常见问题

### Q1: 后端启动失败，提示数据库连接错误

**A:** 检查以下几点：
1. MySQL服务是否启动
2. `.env` 文件中的数据库密码是否正确
3. 数据库 `eceshi` 是否已创建

### Q2: 前端无法请求后端API

**A:** 检查：
1. 后端服务是否在 8000 端口运行
2. 前端 `utils/request.js` 中的 `BASE_URL` 是否正确
3. 浏览器控制台是否有CORS错误（后端已配置CORS）

### Q3: 微信小程序无法运行

**A:** 
1. 确保已安装[微信开发者工具](https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html)
2. 在 `manifest.json` 中配置微信小程序appid
3. 在微信开发者工具中关闭"不校验合法域名"

### Q4: 如何查看数据库表是否创建成功

**A:**
```bash
mysql -u root -p
use eceshi;
show tables;
describe users;
```

---

## 技术支持

- 后端文档：[backend/README.md](./backend/README.md)
- 前端文档：[frontend/README.md](./frontend/README.md)
- 开发计划：[开发计划.md](./开发计划.md)

---

## 开发团队协作

### Git工作流程

```bash
# 1. 克隆项目
git clone <repository-url>

# 2. 创建功能分支
git checkout -b feature/your-feature-name

# 3. 开发并提交
git add .
git commit -m "feat: 添加某某功能"

# 4. 推送分支
git push origin feature/your-feature-name

# 5. 创建Pull Request
```

### 提交规范

```
feat: 新功能
fix: 修复bug
docs: 文档更新
style: 代码格式调整
refactor: 重构
test: 测试
chore: 构建/工具链
```

---

**祝开发顺利！** 🎉

有问题随时在Issues中提出。

