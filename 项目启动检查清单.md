# 项目启动检查清单 ✅

## 快速启动（5分钟）

### 1️⃣ 启动后端（2分钟）

```bash
cd backend

# 确认环境
python --version  # 需要 3.10+
mysql --version   # 需要 8.0+

# 启动服务
uvicorn app.main:app --reload

# ✅ 看到这样的输出表示成功：
# INFO:     Uvicorn running on http://0.0.0.0:8000
# INFO:     Application startup complete.
```

**测试后端**:
- 打开浏览器访问: http://localhost:8000/api/docs
- 应该能看到 Swagger API 文档页面

---

### 2️⃣ 启动前端（3分钟）

**方法A: 使用 HBuilderX（推荐）**
1. 打开 HBuilderX
2. 文件 → 导入 → 从本地目录导入
3. 选择 `frontend` 目录
4. 运行 → 运行到浏览器 → Chrome

**方法B: 使用命令行**
```bash
cd frontend
npm install  # 首次运行需要
npm run dev:h5
```

**测试前端**:
- H5: http://localhost:8080
- 应该能看到首页

---

## 功能测试清单

### ✅ 用户注册登录

**注册流程**:
1. [ ] 访问前端首页
2. [ ] 点击"我的" → "点击登录/注册"
3. [ ] 点击"立即注册"
4. [ ] 输入手机号: `13800138000`
5. [ ] 点击"获取验证码"，输入: `123456`
6. [ ] 设置密码: `123456`
7. [ ] 点击"立即注册"
8. [ ] ✅ 应该自动跳转到首页，顶部显示已登录

**登录流程**:
1. [ ] 点击"退出登录"
2. [ ] 再次点击"我的" → "点击登录/注册"
3. [ ] 输入手机号和密码
4. [ ] 点击"登录"
5. [ ] ✅ 应该成功登录

---

### ✅ 项目浏览

1. [ ] 首页显示项目列表
2. [ ] 点击某个项目
3. [ ] ✅ 应该跳转到项目详情页
4. [ ] 查看项目信息（价格、实验室、服务周期）
5. [ ] 切换Tab（介绍、须知、要求、FAQ）
6. [ ] ✅ 内容正常显示

---

### ✅ 分类浏览

1. [ ] 点击底部"分类"
2. [ ] ✅ 显示分类列表（电镜专场、材料测试等）
3. [ ] 点击某个分类
4. [ ] ✅ 显示该分类下的项目列表

---

### ✅ 个人中心

1. [ ] 点击底部"我的"
2. [ ] ✅ 显示用户信息（昵称、手机号）
3. [ ] ✅ 显示账户信息（余额、额度、积分）
4. [ ] 点击"实名认证"
5. [ ] ✅ 跳转到认证页面

---

### ✅ 实名认证

1. [ ] 填写真实姓名: `张三`
2. [ ] 填写身份证号: `110101199001011234`
3. [ ] 选择地区: `北京市 北京市`
4. [ ] 填写高校: `清华大学`
5. [ ] 填写院系: `计算机系`
6. [ ] 点击"提交认证"
7. [ ] ✅ 提示"提交成功，等待审核"

---

## API测试清单

### 使用Swagger测试

访问: http://localhost:8000/api/docs

**测试认证接口**:
1. [ ] POST `/api/v1/auth/send-sms` - 发送验证码
2. [ ] POST `/api/v1/auth/register` - 注册
3. [ ] POST `/api/v1/auth/login` - 登录

**测试用户接口**（需要先登录获取token）:
1. [ ] GET `/api/v1/users/me` - 获取用户信息
2. [ ] PUT `/api/v1/users/me` - 更新用户信息
3. [ ] POST `/api/v1/users/certification` - 提交认证
4. [ ] GET `/api/v1/users/balance` - 获取余额

**测试项目接口**:
1. [ ] GET `/api/v1/projects/categories` - 获取分类
2. [ ] GET `/api/v1/projects/list` - 获取项目列表
3. [ ] GET `/api/v1/projects/{id}` - 获取项目详情

---

## 数据库检查

```bash
# 连接数据库
mysql -u root -p123456

# 切换数据库
USE eceshi;

# 查看表
SHOW TABLES;
# 应该看到: users, user_certification

# 查看用户数据
SELECT id, phone, nickname, is_certified, membership_level, created_at 
FROM users;

# 查看认证数据
SELECT id, user_id, status, university, department, created_at 
FROM user_certification;
```

---

## 常见问题排查

### ❌ 后端启动失败

**问题1: 数据库连接失败**
```
解决方案:
1. 检查MySQL是否启动: brew services list | grep mysql
2. 检查.env文件中的数据库密码是否正确
3. 尝试手动连接: mysql -u root -p
```

**问题2: 端口被占用**
```
解决方案:
1. 查看占用: lsof -i :8000
2. 杀死进程: kill -9 <PID>
3. 或更换端口: uvicorn app.main:app --port 8001
```

---

### ❌ 前端启动失败

**问题1: 依赖安装失败**
```
解决方案:
1. 删除node_modules: rm -rf node_modules
2. 清除缓存: npm cache clean --force
3. 重新安装: npm install
```

**问题2: API请求失败**
```
解决方案:
1. 检查后端是否启动
2. 检查frontend/utils/request.js中的BASE_URL
3. 打开浏览器控制台查看网络请求
```

---

### ❌ 数据库问题

**问题1: 表不存在**
```
解决方案:
cd backend
python init_db.py
```

**问题2: 连接被拒绝**
```
解决方案:
1. 启动MySQL: brew services start mysql
2. 检查端口: lsof -i :3306
```

---

## 性能检查

### 后端性能
```bash
# API响应时间测试
curl -w "@-" -o /dev/null -s "http://localhost:8000/api/v1/projects/list" <<'EOF'
time_namelookup:  %{time_namelookup}\n
time_connect:  %{time_connect}\n
time_starttransfer:  %{time_starttransfer}\n
time_total:  %{time_total}\n
