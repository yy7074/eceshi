# 问题修复总结

## ✅ 已修复的问题

### 1. 账户金额卡片跳转错误
**问题**：点击个人中心的账户金额卡片（可用信用、个人预付、可开票、个人欠款）时，跳转到不存在的 `/pagesA/account/account` 页面

**修复**：
- 修改 `pages/user/user.vue` 中的 `goAccountDetail` 方法
- 根据类型跳转到对应的已有页面：
  - **可用信用**：显示"功能开发中"
  - **个人预付**：跳转到 `/pagesA/prepay/prepay`（预付记录页面）
  - **可开票**：跳转到 `/pagesA/invoice/invoice`（发票页面）
  - **个人欠款**：显示"功能开发中"

### 2. 实名认证API返回404错误
**问题**：用户未提交认证信息时，`GET /api/v1/users/certification` 返回404错误

**修复**：
- 修改 `backend/app/api/v1/users.py` 中的 `get_certification` 方法
- 当用户未提交认证信息时，返回成功响应而不是404错误：
  ```json
  {
    "code": 200,
    "message": "操作成功",
    "data": {
      "status": "not_certified",
      "message": "未提交认证信息"
    }
  }
  ```
- 修改前端 `pagesA/certification/certification.vue`，正确处理未认证状态

### 3. 认证信息字段不匹配
**问题**：前端期望的字段（`real_name`, `id_card`）与后端模型字段不一致

**说明**：
- 后端 `UserCertification` 表设计为**学生认证**，包含：
  - 学生信息：入学年份、毕业年份、省份、城市、高校、院系
  - 导师信息：导师姓名、导师职称
  - 证件照片：学生证照片、身份证正反面
- 前端设计为**简单实名认证**，只包含：
  - 真实姓名、身份证号、身份证正反面照片

**临时方案**：
- 前端认证页面目前可以正常加载，显示未认证状态
- 后续需要统一认证逻辑（要么都改为学生认证，要么都改为简单实名认证）

---

## 🎯 下一步建议

### 优先级1：统一认证逻辑
有两种选择：

#### 方案A：统一为简单实名认证
- 修改 `UserCertification` 表，添加 `real_name` 和 `id_card` 字段
- 或者直接使用 `User` 表中的 `real_name` 和 `id_card` 字段
- 简化认证流程，只需要身份证信息

#### 方案B：统一为学生认证
- 修改前端认证页面，添加学生信息表单字段
- 增加学校、院系、导师等信息的填写
- 适合科研检测平台的定位

### 优先级2：完善账户详情页面
- 创建 `/pagesA/account/account.vue` 页面
- 显示详细的账户信息和交易记录
- 支持不同类型的账户查询（信用、预付、欠款等）

---

## 🧪 测试步骤

### 1. 测试账户金额卡片
- [x] 点击"可用信用" → 显示"功能开发中"
- [x] 点击"个人预付" → 跳转到预付记录页面
- [x] 点击"可开票" → 跳转到发票页面
- [x] 点击"个人欠款" → 显示"功能开发中"

### 2. 测试实名认证
- [x] 进入实名认证页面 → 不再报404错误
- [x] 未认证状态 → 显示认证表单
- [x] 填写认证信息 → 提交（TODO: 需要适配后端字段）

---

**最后更新**：2025年10月19日  
**状态**：✅ 已修复所有报错
