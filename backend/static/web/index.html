<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>科研检测服务平台 - E测试</title>
    <meta name="description" content="专业的科研检测服务平台，提供一站式检测解决方案">
    <meta name="keywords" content="科研检测,实验检测,检测服务,E测试">
    
    <!-- Vue 3 -->
    <script src="https://cdn.jsdelivr.net/npm/vue@3.4.21/dist/vue.global.prod.js"></script>
    
    <!-- Element Plus -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/element-plus@2.5.6/dist/index.css">
    <script src="https://cdn.jsdelivr.net/npm/element-plus@2.5.6/dist/index.full.min.js"></script>
    
    <!-- Element Plus 图标 -->
    <script src="https://cdn.jsdelivr.net/npm/@element-plus/icons-vue@2.3.1/dist/index.min.js"></script>
    
    <!-- Axios -->
    <script src="https://cdn.jsdelivr.net/npm/axios@1.6.7/dist/axios.min.js"></script>
    
    <!-- 自定义样式 -->
    <link rel="stylesheet" href="./assets/css/style.css">
</head>
<body>
    <div id="app" v-cloak>
        <!-- 顶部导航 -->
        <el-container class="app-container">
            <!-- PC端顶部导航栏 -->
            <el-header class="app-header" height="60px">
                <div class="header-content">
                    <div class="header-left">
                        <h1 class="logo" @click="currentView = 'home'">
                            🔬 E测试
                        </h1>
                        <el-menu
                            v-if="!isMobile"
                            :default-active="currentView"
                            class="header-menu"
                            mode="horizontal"
                            @select="handleMenuSelect">
                            <el-menu-item index="home">首页</el-menu-item>
                            <el-menu-item index="projects">检测项目</el-menu-item>
                            <el-menu-item index="orders" v-if="isLogin">我的订单</el-menu-item>
                            <el-menu-item index="about">关于我们</el-menu-item>
                        </el-menu>
                    </div>
                    <div class="header-right">
                        <div v-if="isLogin" class="user-info">
                            <el-dropdown @command="handleUserCommand">
                                <span class="user-dropdown">
                                    <el-avatar :size="32" :src="userInfo.avatar">{{ userInfo.nickname?.[0] || 'U' }}</el-avatar>
                                    <span class="user-name">{{ userInfo.nickname || '用户' }}</span>
                                    <el-icon><arrow-down /></el-icon>
                                </span>
                                <template #dropdown>
                                    <el-dropdown-menu>
                                        <el-dropdown-item command="profile">个人中心</el-dropdown-item>
                                        <el-dropdown-item command="orders">我的订单</el-dropdown-item>
                                        <el-dropdown-item divided command="logout">退出登录</el-dropdown-item>
                                    </el-dropdown-menu>
                                </template>
                            </el-dropdown>
                        </div>
                        <el-button v-else type="primary" @click="showLogin = true">登录</el-button>
                        
                        <!-- 移动端菜单按钮 -->
                        <el-button v-if="isMobile" class="mobile-menu-btn" icon="Menu" @click="showMobileMenu = true"></el-button>
                    </div>
                </div>
            </el-header>

            <!-- 主内容区 -->
            <el-main class="app-main">
                <div class="main-content">
                    <!-- 首页 -->
                    <home-view v-if="currentView === 'home'" @go-projects="currentView = 'projects'" @go-detail="goToDetail"></home-view>
                    
                    <!-- 项目列表 -->
                    <projects-view v-else-if="currentView === 'projects'" @go-detail="goToDetail"></projects-view>
                    
                    <!-- 项目详情 -->
                    <project-detail v-else-if="currentView === 'detail'" :project-id="currentProjectId" @go-back="currentView = 'projects'"></project-detail>
                    
                    <!-- 订单列表 -->
                    <orders-view v-else-if="currentView === 'orders'"></orders-view>
                    
                    <!-- 个人中心 -->
                    <profile-view v-else-if="currentView === 'profile'"></profile-view>
                    
                    <!-- 关于我们 -->
                    <about-view v-else-if="currentView === 'about'"></about-view>
                </div>
            </el-main>

            <!-- PC端底部 -->
            <el-footer v-if="!isMobile" class="app-footer" height="200px">
                <div class="footer-content">
                    <div class="footer-section">
                        <h3>关于我们</h3>
                        <p>专业的科研检测服务平台</p>
                        <p>为科研工作者提供优质服务</p>
                    </div>
                    <div class="footer-section">
                        <h3>联系方式</h3>
                        <p>客服电话：400-123-4567</p>
                        <p>邮箱：service@eceshi.com</p>
                    </div>
                    <div class="footer-section">
                        <h3>关注我们</h3>
                        <p>微信公众号：E测试</p>
                        <p>微信小程序：科研检测服务平台</p>
                    </div>
                </div>
                <div class="footer-copyright">
                    <p>&copy; 2025 E测试 科研检测服务平台. All rights reserved.</p>
                </div>
            </el-footer>

            <!-- 移动端底部导航 -->
            <div v-if="isMobile" class="mobile-tabbar">
                <div class="tabbar-item" :class="{active: currentView === 'home'}" @click="currentView = 'home'">
                    <el-icon><home-filled /></el-icon>
                    <span>首页</span>
                </div>
                <div class="tabbar-item" :class="{active: currentView === 'projects'}" @click="currentView = 'projects'">
                    <el-icon><files /></el-icon>
                    <span>项目</span>
                </div>
                <div class="tabbar-item" :class="{active: currentView === 'orders'}" @click="handleTabClick('orders')">
                    <el-icon><document /></el-icon>
                    <span>订单</span>
                </div>
                <div class="tabbar-item" :class="{active: currentView === 'profile'}" @click="handleTabClick('profile')">
                    <el-icon><user /></el-icon>
                    <span>我的</span>
                </div>
            </div>
        </el-container>

        <!-- 登录对话框 -->
        <el-dialog v-model="showLogin" title="登录" width="400px" :close-on-click-modal="false">
            <el-form :model="loginForm">
                <el-form-item label="手机号">
                    <el-input v-model="loginForm.phone" placeholder="请输入手机号" maxlength="11"></el-input>
                </el-form-item>
                <el-form-item label="验证码">
                    <el-input v-model="loginForm.sms_code" placeholder="请输入验证码">
                        <template #append>
                            <el-button :disabled="countdown > 0" @click="sendSms">
                                {{ countdown > 0 ? `${countdown}秒后重试` : '获取验证码' }}
                            </el-button>
                        </template>
                    </el-input>
                </el-form-item>
            </el-form>
            <template #footer>
                <el-button @click="showLogin = false">取消</el-button>
                <el-button type="primary" @click="handleLogin" :loading="loginLoading">登录</el-button>
            </template>
        </el-dialog>

        <!-- 移动端菜单抽屉 -->
        <el-drawer v-model="showMobileMenu" title="菜单" direction="rtl" size="70%">
            <el-menu :default-active="currentView" @select="handleMobileMenuSelect">
                <el-menu-item index="home">
                    <el-icon><home-filled /></el-icon>
                    <span>首页</span>
                </el-menu-item>
                <el-menu-item index="projects">
                    <el-icon><files /></el-icon>
                    <span>检测项目</span>
                </el-menu-item>
                <el-menu-item index="orders" v-if="isLogin">
                    <el-icon><document /></el-icon>
                    <span>我的订单</span>
                </el-menu-item>
                <el-menu-item index="about">
                    <el-icon><info-filled /></el-icon>
                    <span>关于我们</span>
                </el-menu-item>
                <el-menu-item v-if="isLogin" @click="logout">
                    <el-icon><switch-button /></el-icon>
                    <span>退出登录</span>
                </el-menu-item>
            </el-menu>
        </el-drawer>
    </div>

    <!-- 应用脚本 -->
    <script src="./assets/js/app.js"></script>
</body>
</html>


